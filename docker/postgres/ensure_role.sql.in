-- Create the role only if it doesn't exist, using psql's \gexec to run the generated command.
\set QUIET 1
SELECT format('CREATE ROLE %I WITH LOGIN PASSWORD %L', :'APP_DB_USER', :'APP_DB_PASSWORD')
WHERE NOT EXISTS (SELECT 1 FROM pg_roles WHERE rolname = :'APP_DB_USER') \gexec

